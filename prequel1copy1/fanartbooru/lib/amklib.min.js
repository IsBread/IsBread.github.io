var amk={version:"25/10/20 C",help:"visit https://docs.google.com/document/d/1xLi_G5CO-dS15ahEZxO3bqVPvrs4cYoGA7HprFV31vQ/edit?usp=sharing for full documentation",displayCorrectContent:function(flashVersion){this.scriptChk.hideNoJSElements();this.mobChk.viewCorrectElements();this.flashChk.viewCorrectElements(flashVersion);},displayIncorrectContent:function(flashVersion){this.scriptChk.hideNoJSElements();this.mobChk.viewIncorrectElements();this.flashChk.viewIncorrectElements(flashVersion);},ezCookie:{get:function(){arrayOfPairs=document.cookie.split('; ');var finalObject={};for(var i=0;i<arrayOfPairs.length;i++){var parts=arrayOfPairs[i].split('=');finalObject[parts[0]]=parts[1];};return(finalObject);},set:function(name,data,duration){if(typeof duration=="number"){var expDate=new Date();expDate.setDate(expDate.getDate()+duration);const cookieString=(name+"="+data+"; expires="+expDate.toUTCString()+"; path=/");document.cookie=cookieString;}else{document.cookie=(name+"="+data+"; path=/");};},remove:function(name){var expDate=new Date();expDate.setDate(expDate.getDate()-1);const cookieString=name+"=; expires="+expDate.toUTCString();document.cookie=cookieString;}},scriptChk:{amkNoJSElements:document.getElementsByClassName('amkNoJS'),hideNoJSElements:function(){for(var i=0;i<this.amkNoJSElements.length;i++){this.amkNoJSElements[i].style.display="none";}}},mobChk:{isMobileDevice:function(){if((typeof window.orientation!=="undefined")||(navigator.userAgent.indexOf('IEMobile')!==-1)||(navigator.userAgent.indexOf("Nintendo")!==-1)||(navigator.userAgent.indexOf("Blackberry")!==-1)){return true;}else{return false;}},mobileOnlyElements:document.getElementsByClassName('amkMobileOnly'),desktopOnlyElements:document.getElementsByClassName('amkDesktopOnly'),hideAllInvalidElements:function(correct){if(this.isMobileDevice()==correct){for(var i=0;i<this.desktopOnlyElements.length;i++){this.desktopOnlyElements[i].style.display="none";}}else{for(var i=0;i<this.mobileOnlyElements.length;i++){this.mobileOnlyElements[i].style.display="none";}}},displayAllValidElements:function(correct){if(this.isMobileDevice()==correct){for(var i=0;i<this.mobileOnlyElements.length;i++){this.mobileOnlyElements[i].style.display=null;}}else{for(var i=0;i<this.desktopOnlyElements.length;i++){this.desktopOnlyElements[i].style.display=null;}}},viewCorrectElements:function(){this.hideAllInvalidElements(true);this.displayAllValidElements(true);},viewIncorrectElements:function(){this.hideAllInvalidElements(false);this.displayAllValidElements(false);},forceMobileView:function(){this.isMobileDevice()?this.viewCorrectElements():this.viewIncorrectElements();},forceDesktopView:function(){this.isMobileDevice()?this.viewIncorrectElements():this.viewCorrectElements();}},flashChk:{flashOnlyElements:document.getElementsByClassName('amkFlashOnly'),noFlashOnlyElements:document.getElementsByClassName('amkNoFlashOnly'),hasFlash:function(version){if(typeof amk.ezCookie.get().amk_FlashVerifiedAtVersion!='undefined'){if(parseInt(amk.ezCookie.get().amk_FlashVerifiedAtVersion)>=version){return(true);}};if(typeof swfobject!='undefined'){if(typeof version!='undefined'){if(swfobject.hasFlashPlayerVersion(String(version))){amk.ezCookie.set("amk_FlashVerifiedAtVersion",String(version));return(true);}else{return(false);}}else{return(false);}}else{return(true);};},hideAllInvalidElements:function(version,correct){if(this.hasFlash(version)==correct||version==-1){for(var i=0;i<this.noFlashOnlyElements.length;i++){this.noFlashOnlyElements[i].style.display="none";}}else{for(var i=0;i<this.flashOnlyElements.length;i++){this.flashOnlyElements[i].style.display="none";}}},displayAllValidElements:function(version,correct){if(this.hasFlash(version)==correct||version==-1){for(var i=0;i<this.flashOnlyElements.length;i++){this.flashOnlyElements[i].style.display=null;}}else{for(var i=0;i<this.noFlashOnlyElements.length;i++){this.noFlashOnlyElements[i].style.display=null;}}},viewCorrectElements:function(version){this.hideAllInvalidElements(version,true);this.displayAllValidElements(version,true);},viewIncorrectElements:function(version){this.hideAllInvalidElements(version,false);this.displayAllValidElements(version,false);},forceNoFlashView:function(){this.viewCorrectElements(9999);},forceFlashView:function(){this.viewCorrectElements(-1);}},globEvnt:{events:[],listen:function(target,string,functionToRun){this.events.push({target:target,string:string,functionToRun:functionToRun,live:true});},stopListening:function(target,string,functionToRun){for(var i=0;i<this.events.length;i++){if(target==this.events[i].target&&string==this.events[i].string&&functionToRun==this.events[i].functionToRun){this.events.splice(i,1);}}},broadcast:function(string,data){var needsCleaning;for(var i=0;i<this.events.length;i++){if(string==this.events[i].string){if((typeof this.events[i].target!=='undefined')&&(typeof this.events[i].functionToRun!=='undefined')){this.events[i].functionToRun.call(this.events[i].target,data);}else{this.events[i].live=false;this.events.splice(i,1);needsCleaning=true;}}};if(needsCleaning){this.removeBadEvents();}},removeBadEvents:function(){this.events=this.events.filter(function(currentEvent){return currentEvent.live==true});},listAllListens:function(){console.log("---Listing all listens---");for(var i=0;i<this.events.length;i++){console.log("target "+i+":");console.log(this.events[i].target);};console.log("---end of list---");}},txtTool:{characterVariations:{"a":["\u0430","\u00e0","\u00e1","\u1ea1","\u0105"],"c":["\u0441","\u0188","\u010b"],"d":["\u0501","\u0257"],"e":["\u0435","\u1eb9","\u0117","\u00e9","\u00e8"],"g":["\u0121"],"h":["\u04bb"],"i":["\u0456","\u00ed","\u00ec","\u00ef"],"j":["\u0458","\u029d"],"k":["\u03ba"],"l":["\u04cf","\u1e37"],"n":["\u0578"],"o":["\u043e","\u03bf","\u0585","\u022f","\u1ecd","\u1ecf","\u01a1","\u00f6","\u00f3","\u00f2"],"p":["\u0440"],"q":["\u0566"],"s":["\u0282"],"u":["\u03c5","\u057d","\u00fc","\u00fa","\u00f9"],"v":["\u03bd","\u0475"],"x":["\u0445","\u04b3"],"y":["\u0443","\u00fd"],"z":["\u0290","\u017c"]},convertToNormalEnglishCharacters:function(inputString){var tempString=inputString;var variations=amk.txtTool.characterVariations;for(var i=0;i<Object.keys(variations).length;i++){for(var ii=0;ii<variations[Object.keys(variations)[i]].length;ii++){var tempRegex=new RegExp(variations[Object.keys(variations)[i]][ii],"g");inputString=inputString.replace(tempRegex,Object.keys(variations)[i]);}};return inputString;},getVariationsRegexComponant:function(inputString){var variations=amk.txtTool.characterVariations;var inputCharacters=inputString.split("");var tempString="";for(var i=0;i<inputCharacters.length;i++){if(variations[inputCharacters[i]]!=undefined){tempString+="(?:"+inputCharacters[i]+"|"+variations[inputCharacters[i]].join("|")+")";}else{tempString+=inputCharacters[i];}};return tempString;},fixAnAndA:function(inputString,wordToCheck){if(typeof wordToCheck=="undefined"){inputString=inputString.replace(new RegExp("(\\W)a ([aeiou]\\w+)","gi"),function getCorrectCaseAn(full,a,b){return a+amk.txtTool.matchCapitolisation("an",b)+" "+b;});inputString=inputString.replace(new RegExp("(\\W)an ([bcdfghjklmnpqrstvwxyz]\\w+)","gi"),function getCorrectCaseAn(full,a,b){return a+amk.txtTool.matchCapitolisation("a",b)+" "+b;});return inputString;}else{const aRegex=new RegExp("(\\W)a ("+wordToCheck+")","gi");const anRegex=new RegExp("(\\W)an ("+wordToCheck+")","gi");if(wordToCheck.match(new RegExp("^[aeiou].+$"))!=null){inputString=inputString.replace(aRegex,function getCorrectCaseAn(full,a,b){return a+amk.txtTool.matchCapitolisation("an",b)+" "+b;});}else{inputString=inputString.replace(anRegex,function getCorrectCaseAn(full,a,b){return a+amk.txtTool.matchCapitolisation("a",b)+" "+b;});};return inputString;}},matchCapitolisation:function(inputString,patternString){return setStringCapitolisation(inputString,getCapitolisationPattern(patternString));function getCapitolisationPattern(inputString){var words=inputString.match(/(\w+)/g);var allBeginWithCapitol=true;var allUpperCase=true;var allLowerCase=true;var startBeginWithCapitol=true;const startWithCapitolRegex=new RegExp(/^[A-Z][a-z]+$/);const allCapsRegex=new RegExp(/^[A-Z]+$/);const allLowerRegex=new RegExp(/^[a-z]+$/);for(var i=0;i<words.length;i++){if(words[i].match(startWithCapitolRegex)!=null){if(i==0){startBeginWithCapitol=true;}else{startBeginWithCapitol=false;};allUpperCase=false;allLowerCase=false;}else if(words[i].match(allCapsRegex)!=null){allBeginWithCapitol=false;allLowerCase=false;startBeginWithCapitol=false;}else if(words[i].match(allLowerRegex)!=null){if(i==0){startBeginWithCapitol=false;};allBeginWithCapitol=false;allUpperCase=false;}else{allUpperCase=false;allBeginWithCapitol=false;allLowerCase=false;startBeginWithCapitol=false;};};if(allUpperCase){return 1;}else if(allLowerCase){return 2;}else if(allBeginWithCapitol){return 3;}else if(startBeginWithCapitol){return 4;}else{return null;};};function setStringCapitolisation(inputString,inputMethod){if(inputMethod==1){return inputString.toUpperCase();}else if(inputMethod==2){return inputString.toLowerCase();}else if(inputMethod==3){return inputString.replace(/(\w)(\w+)/g,function(c){return c[0].toUpperCase()+c.slice(1,c.length).toLowerCase();});}else if(inputMethod==4){return inputString[0].toUpperCase()+inputString.slice(1,inputString.length).toLowerCase();}else{return inputString;};};},replaceWordsWithinElements:function(ElementsArray,replacementsObject,convertToHTML,matchCapitolisation,fixAnAndA,acountForCharacterVariations){if(typeof matchCapitolisation==undefined){var matchCapitolisation=false;};if(typeof convertToHTML==undefined){var convertToHTML=false;};function getAllTextNodes(element){var tempArray=[];for(var i=0;i<element.childNodes.length;i++){if(element.childNodes[i].nodeType==3){tempArray.push(element.childNodes[i]);}else{tempArray=tempArray.concat(getAllTextNodes(element.childNodes[i]));};};return tempArray;};function regexReplace(input,from,to){if(matchCapitolisation){try{return input.replace(new RegExp("(?<!\\w)("+from+")(?!\\w)","gi"),function(x){return amk.txtTool.matchCapitolisation(to,x);});}catch(err){return input.replaceAll(new RegExp("(\\W|^)("+from+")(\\W|$)","gi"),function(all,group1,group2,group3){return group1+amk.txtTool.matchCapitolisation(to,group2)+group3;});}}else{try{return input.replace(new RegExp("(?<!\\w)("+from+")(?!\\w)","gi"),to);}catch(err){return input.replaceAll(new RegExp("(\\W|^)("+from+")(\\W|$)","gi"),function(all,group1,group2,group3){return group1+to+group3;});}};};function stripScriptsAndIframesFromString(inputString){inputString=inputString.replace(new RegExp("<script.+?>.*?<\/script>","gi"),"");inputString=inputString.replace(new RegExp("<iframe.+?>.*?<\/iframe>","gi"),"");inputString=inputString.replace(new RegExp("<.+?=.+?>","gi"),"");return inputString;};tempTextNodes=[];for(var i=0;i<ElementsArray.length;i++){tempTextNodes=tempTextNodes.concat(getAllTextNodes(ElementsArray[i]));};tempTextNodes=amk.arrayTool.removeDupes(tempTextNodes);for(var ii=0;ii<tempTextNodes.length;ii++){var originalNodeValue=tempTextNodes[ii].nodeValue;for(var i=0;i<Object.keys(replacementsObject).length;i++){var tempKey=Object.keys(replacementsObject)[i];var tempSearchTerm=tempKey;if(acountForCharacterVariations){tempSearchTerm=amk.txtTool.getVariationsRegexComponant(tempKey);};if(fixAnAndA==true){tempTextNodes[ii].nodeValue=amk.txtTool.fixAnAndA(regexReplace(tempTextNodes[ii].nodeValue,tempSearchTerm,replacementsObject[tempKey]),replacementsObject[tempKey]);}else{tempTextNodes[ii].nodeValue=regexReplace(tempTextNodes[ii].nodeValue,tempSearchTerm,replacementsObject[tempKey]);};};if(convertToHTML==true&&tempTextNodes[ii].nodeValue!=originalNodeValue){var tempSpanElement=document.createElement("span");tempSpanElement.innerHTML=stripScriptsAndIframesFromString(tempTextNodes[ii].nodeValue);tempTextNodes[ii].parentElement.replaceChild(tempSpanElement,tempTextNodes[ii]);};};},parseTimeObjectFromString:function(stringToUse){var tempSeconds=0;const years=getPrecedingNumber(stringToUse,"year");if(years!=null){tempSeconds+=years*31536000;};const months=getPrecedingNumber(stringToUse,"month");if(months!=null){tempSeconds+=months*2628000;};const weeks=getPrecedingNumber(stringToUse,"week");if(weeks!=null){tempSeconds+=weeks*604800;};const days=getPrecedingNumber(stringToUse,"day");if(days!=null){tempSeconds+=days*86400;};const hours=getPrecedingNumber(stringToUse,"hour");if(hours!=null){tempSeconds+=hours*3600;};const minutes=getPrecedingNumber(stringToUse,"minute");if(minutes!=null){tempSeconds+=minutes*60;};const seconds=getPrecedingNumber(stringToUse,"second");if(seconds!=null){tempSeconds+=seconds;};function getPrecedingNumber(stringToUse,stringToFind){const regex=new RegExp("(\\d+)(?:\\s*"+stringToFind+")","gi");var resultsArray=regex.exec(stringToUse);if(resultsArray!=null){if(resultsArray.length>=2){return(parseInt(resultsArray[1]));}else{return(null);}}else{return(null);}};return(this.getTimeObject(tempSeconds));},getTimeObject:function(seconds){var seconds=seconds;var minutes=Math.floor(seconds/60);var hours=Math.floor(seconds/3600);var days=Math.floor(seconds/86400);var years=Math.floor(seconds/31536000);seconds=seconds-(minutes*60);minutes=minutes-(hours*60);hours=hours-(days*24);days=days-(years*365);return({years:years,days:days,hours:hours,minutes:minutes,seconds:seconds});},getDateString:function(timeObject){var minutes=timeObject.minutes;var hours=timeObject.hours;var days=timeObject.days;var years=timeObject.years;if(minutes<10){minutes="0"+minutes;};if(hours<10){hours="0"+hours;};return("year "+years+" - day "+days+" - "+hours+":"+minutes);},getTimerString:function(timeObject){var tempString="";var substrings=[];if(timeObject.years>0){if(timeObject.years==1){substrings.push(timeObject.years+" year");}else{substrings.push(timeObject.years+" years");};};if(timeObject.days>0){if(timeObject.days==1){substrings.push(timeObject.days+" day");}else{substrings.push(timeObject.days+" days");};};if(timeObject.hours>0){if(timeObject.hours==1){substrings.push(timeObject.hours+" hour");}else{substrings.push(timeObject.hours+" hours");};};if(timeObject.minutes>0){if(timeObject.minutes==1){substrings.push(timeObject.minutes+" minute");}else{substrings.push(timeObject.minutes+" minutes");};};if(timeObject.seconds>0){if(timeObject.seconds==1){substrings.push(timeObject.seconds+" second");}else{substrings.push(timeObject.seconds+" seconds");};};for(var i=0;i<substrings.length;i++){if(substrings.length>1){if(i<substrings.length-2){substrings[i]+=", ";}else if(i==substrings.length-2){substrings[i]+=" and "};};tempString+=substrings[i];};return(tempString);},getContainsString:function(haystack,needles){var matchFound=false;if(typeof needles=='string'){if(haystack.indexOf(needles)>=0){matchFound=true;};}else if(Array.isArray(needles)==true){for(var i=0;i<needles.length&&matchFound!=true;i++){if(haystack.indexOf(needles[i])>=0){matchFound=true;};};};return(matchFound);}},arrayTool:{removeDupes:function(inputArray){var tempArray=[];for(var i=0;i<inputArray.length;i++){if(tempArray.indexOf(inputArray[i])<0){tempArray.push(inputArray[i]);}};return tempArray;},getModalElement:function(inputArray){var items=[];var itemCounts=[];for(var i=0;i<inputArray.length;i++){if(items.indexOf(inputArray[i])<0){items.push(inputArray[i]);itemCounts.push(1);}else{itemCounts[items.indexOf(inputArray[i])]++;};};var itemCountObjects=[];for(var i=0;i<items.length;i++){itemCountObjects[i]={"value":items[i],"quantity":itemCounts[i]};};return itemCountObjects.sort(function(a,b){return b.quantity-a.quantity;})[0]["value"];}},numTool:{randBetween:function(min,max){return min+(Math.random()*(max-min));},randIntBetween:function(min,max){return(Math.round(this.randBetween(min,max)));}},colourTool:{blendHexColours:function(inputA,inputB,distance){var inputADec=hexColourToDecimal(inputA);var inputBDec=hexColourToDecimal(inputB);var newR=Math.round(inputADec.r+((inputBDec.r-inputADec.r)*distance));var newG=Math.round(inputADec.g+((inputBDec.g-inputADec.g)*distance));var newB=Math.round(inputADec.b+((inputBDec.b-inputADec.b)*distance));return decimalColourToHex(newR,newB,newG);function hexColourToDecimal(input){if(input[0]=="#"){input=input.substring(1,7);};var output={};output.r=parseInt(input.substring(0,2),16);output.g=parseInt(input.substring(2,4),16);output.b=parseInt(input.substring(4,6),16);return output;};function decimalColourToHex(inputR,inputG,inputB){var result="#"+inputR.toString(16)+inputG.toString(16)+inputB.toString(16);return result;}}},counter:{results:{},add:function(string,quantity){if(typeof this.results[string]=='undefined'){this.results[string]=0;};if(typeof quantity=='undefined'){this.results[string]+=1;}else{this.results[string]+=quantity;};},report:function(){console.log("repetitions");var sortables=[];for(log in this.results){sortables.push([log,this.results[log]]);};sortables.sort(function(a,b){if(a[1]<b[1]){return-1;}else if(a[1]>b[1]){return 1;}else{return 0;};});console.log(sortables.reduce(function(result,e){return result+=("\n"+e[0]+": "+e[1]+" times.");},""));}},toolTipEngine:{running:false,toolTip:null,lastTarget:null,boundScanFunction:null,bindScan:function(){this.boundScanFunction=this.scanMouse.bind(this);},enable:function(){if(this.running==false){if(this.boundScanFunction==null){this.bindScan();};boundScanFunction=this.boundScanFunction;this.toolTip=document.createElement("div");this.toolTip.id="amkToolTip";this.toolTip.classList.add("amkToolTipOff");if(document.body!=null){document.body.appendChild(this.toolTip);};window.addEventListener("mousemove",boundScanFunction);this.running=true;};},disable:function(){if(this.running==true){if(this.boundScanFunction==null){this.bindScan();};boundScanFunction=this.boundScanFunction;window.removeEventListener("mousemove",boundScanFunction);this.toolTip.parentNode.removeChild(this.toolTip);this.toolTip=null;this.running=false;};},scanMouse:function(e){var x=e.clientX;var y=e.clientY;var target=document.elementFromPoint(x,y);if(target!=null&&typeof target.dataset.amkToolTip!="undefined"){this.toolTip.classList.add("amkToolTipOn");this.toolTip.classList.remove("amkToolTipOff");switch(this.getMouseQuadrant(x,y)){case 1:this.toolTip.style.top=(y+25)+'px';this.toolTip.style.left=(x+25)+'px';this.toolTip.style.bottom='unset';this.toolTip.style.right='unset';this.toolTip.classList.add("amkToolTipTopLeft");this.toolTip.classList.remove("amkToolTipTopRight");this.toolTip.classList.remove("amkToolTipBottomLeft");this.toolTip.classList.remove("amkToolTipBottomRight");break;case 2:this.toolTip.style.top=(y+25)+'px';this.toolTip.style.right=(window.innerWidth-x-5)+'px';this.toolTip.style.bottom='unset';this.toolTip.style.left='unset';this.toolTip.classList.remove("amkToolTipTopLeft");this.toolTip.classList.add("amkToolTipTopRight");this.toolTip.classList.remove("amkToolTipBottomLeft");this.toolTip.classList.remove("amkToolTipBottomRight");break;case 3:this.toolTip.style.bottom=(window.innerHeight-y+15)+'px';this.toolTip.style.left=(x+25)+'px';this.toolTip.style.top='unset';this.toolTip.style.right='unset';this.toolTip.classList.remove("amkToolTipTopLeft");this.toolTip.classList.remove("amkToolTipTopRight");this.toolTip.classList.add("amkToolTipBottomLeft");this.toolTip.classList.remove("amkToolTipBottomRight");break;case 4:this.toolTip.style.bottom=(window.innerHeight-y+15)+'px';this.toolTip.style.right=(window.innerWidth-x-0)+'px';this.toolTip.style.top='unset';this.toolTip.style.left='unset';this.toolTip.classList.remove("amkToolTipTopLeft");this.toolTip.classList.remove("amkToolTipTopRight");this.toolTip.classList.remove("amkToolTipBottomLeft");this.toolTip.classList.add("amkToolTipBottomRight");break;};if(target!=this.lastTarget){this.lastTarget=target;this.toolTip.innerHTML=target.dataset.amkToolTip;}}else{this.toolTip.classList.add("amkToolTipOff");this.toolTip.classList.remove("amkToolTipOn");}},getMouseQuadrant:function(x,y){if(y<window.innerHeight/2){if(x<window.innerWidth/2){return(1);}else{return(2);}}else{if(x<window.innerWidth/2){return(3);}else{return(4);}}}},pageOverlayEngine:{overlayDiv:null,maxOverlayAlpha:null,fadeStartPosition:null,fadeMaxStartPosition:null,fadeMaxEndPosition:null,fadeEndPosition:null,boundUpdateFunction:null,dynamicOpacity:0,running:false,bindUpdate:function(){this.boundUpdateFunction=this.updateOverlay.bind(this);},enable:function(){if(this.running==false){if(this.boundUpdateFunction==null){this.bindUpdate();};this.overlayDiv=document.getElementById("amkColourOverlay");this.maxOverlayAlpha=this.overlayDiv.dataset.amkOverlayMaxOpacity;this.fadeMaxEndPosition=document.getElementById("amkFadeMaxEnd").getBoundingClientRect().top;this.fadeEndPosition=document.getElementById("amkFadeEnd").getBoundingClientRect().top;if(document.getElementById("amkFadeStart")!=null){this.fadeStartPosition=document.getElementById("amkFadeStart").getBoundingClientRect().top;}else{this.fadeStartPosition=0;};if(document.getElementById("amkFadeMaxStart")!=null){this.fadeMaxStartPosition=document.getElementById("amkFadeMaxStart").getBoundingClientRect().top;}else{this.fadeMaxStartPosition=0;};window.addEventListener('scroll',this.boundUpdateFunction);this.running=true}},dissable:function(){if(this.running==true){window.removeEventListener('scroll',this.boundUpdateFunction);this.running=false;}},updateOverlay:function(){if(window.scrollY>=this.fadeStartPosition&&window.scrollY<this.fadeMaxStartPosition){if(window.scrollY<this.fadeMaxStartPosition){this.dynamicOpacity=(1-(this.fadeMaxStartPosition-window.scrollY)/(this.fadeMaxStartPosition-this.fadeStartPosition))*this.maxOverlayAlpha;this.overlayDiv.style.opacity=this.dynamicOpacity;};}else if(window.scrollY>=this.fadeMaxStartPosition&&window.scrollY<this.fadeMaxEndPosition){this.overlayDiv.style.opacity=this.maxOverlayAlpha;}else if(window.scrollY>=this.fadeMaxEndPosition&&window.scrollY<this.fadeEndPosition){this.dynamicOpacity=(1+(this.fadeMaxEndPosition-window.scrollY)/(this.fadeEndPosition-this.fadeMaxEndPosition))*this.maxOverlayAlpha;this.overlayDiv.style.opacity=this.dynamicOpacity;}else{this.overlayDiv.style.opacity=0;};}},cipher:{encrypt:function(input,key){input=this.dynamicFlipCipher(input,key,true);input=this.dynamicCeaserCipher(input,key,true);return(input);},decrypt:function(input,key){input=this.dynamicCeaserCipher(input,key,false);input=this.dynamicFlipCipher(input,key,false);return(input);},dynamicFlipCipher:function(input,key,forward){var inputArray=input.split("");var keyArray=this.getKeyArray(key);for(var i=0;i<keyArray.length;i++){if(forward){flipPairsFromStartPosition(inputArray,i);}else{flipPairsFromStartPosition(inputArray,keyArray.length-1-i);}};return(inputArray.join(""));function flipPairsFromStartPosition(arrayToUse,numberToFlip){var currentStartPosition=0;numberToFlip++;while(currentStartPosition<arrayToUse.length){flipPairs(arrayToUse,currentStartPosition,currentStartPosition+numberToFlip);currentStartPosition+=numberToFlip+1;};};function flipPairs(arrayToUse,index1,index2){if(index1>=0&&index1<arrayToUse.length&&index2>=0&&index2<arrayToUse.length){var tempData=arrayToUse[index1];arrayToUse[index1]=arrayToUse[index2];arrayToUse[index2]=tempData;};return(arrayToUse);};},dynamicCeaserCipher:function(input,key,forward){const dictionaryArray=this.getDictionaryArray();var inputArray=input.split("");var keyArray=this.getKeyArray(key);for(var i=0;i<inputArray.length;i++){var offsetAmount=this.getKeyValueFromIndex(keyArray,i)%dictionaryArray.length;if(forward){var newIndexValue=(dictionaryArray.indexOf(inputArray[i])+offsetAmount)%dictionaryArray.length;}else{newIndexValue=(dictionaryArray.indexOf(inputArray[i])-offsetAmount);while(newIndexValue<0){newIndexValue+=dictionaryArray.length;};};inputArray[i]=dictionaryArray[newIndexValue];};return(inputArray.join(""));},getKeyArray:function(key){const dictionaryArray=this.getDictionaryArray();var keyArray=btoa(key).split("");for(var i=0;i<keyArray.length;i++){keyArray[i]=parseInt(dictionaryArray.indexOf(keyArray[i]))+keyArray.length;};var totalKeyValue=keyArray.reduce((a,b)=>a+b,0);var keyAppendageValue=parseInt(keyArray.join(""));for(var i=0;i<keyArray.length;i++){keyArray[i]=(keyArray[i]+totalKeyValue+keyAppendageValue+i)%1000;};return keyArray;},getKeyValueFromIndex:function(keyArray,indexToReturn){var currentPass=Math.ceil(indexToReturn/(keyArray.length-1));if(currentPass==0){currentPass=1;};var arrayIndexToChoose=indexToReturn%(keyArray.length);var result=(keyArray[arrayIndexToChoose]*currentPass)%1000;return(result);},getDictionaryArray:function(){var dictionaryArray=[];for(var i=32;i<126;i++){dictionaryArray.push(String.fromCharCode(i))};for(var i=160;i<591;i++){dictionaryArray.push(String.fromCharCode(i))};for(var i=8192;i<8303;i++){dictionaryArray.push(String.fromCharCode(i))};for(var i=8352;i<8399;i++){dictionaryArray.push(String.fromCharCode(i))};for(var i=8448;i<8527;i++){dictionaryArray.push(String.fromCharCode(i))};for(var i=8704;i<8959;i++){dictionaryArray.push(String.fromCharCode(i))};dictionaryArray.push(String.fromCharCode(9));dictionaryArray.push(String.fromCharCode(10));dictionaryArray.push(String.fromCharCode(13));return(dictionaryArray);},selfTest:function(){const testString="0123456789abcdefghijklmnopqrstuvwxyz space comma, full stop. single quote'";const testKey="Katia 123";console.log("encrypted to");var encryptedText=this.encrypt(testString,testKey);console.log(encryptedText);console.log("decrypted to");var decryptedText=this.decrypt(encryptedText,testKey);console.log(decryptedText);if(decryptedText==testString){return(true);}else{return(false);}}}};console.log("amklib loaded");document.addEventListener("DOMContentLoaded",function(event){if(amk.mobChk.isMobileDevice()==false){amk.toolTipEngine.enable();};if(document.getElementById("amkColourOverlay")!=null){amk.pageOverlayEngine.enable();amk.pageOverlayEngine.updateOverlay();};});